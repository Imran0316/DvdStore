@model IEnumerable<DvdStore.Models.Suppliers>
@{
    Layout = "Dashboard";
    ViewBag.Title = "Suppliers";
}

<h2>Manage Suppliers</h2>

@if (ViewBag.Error != null)
{
    <div class="alert alert-danger">
        @ViewBag.Error
    </div>
}

@if (ViewBag.Success != null)
{
    <div class="alert alert-success">
        @ViewBag.Success
    </div>
}

<!-- Add New Supplier Form -->
@if (ViewBag.Error != null)
{
    <div class="alert alert-danger">
        @ViewBag.Error
    </div>
}

@if (ViewBag.Success != null)
{
    <div class="alert alert-success">
        @ViewBag.Success
    </div>
}

<!-- Form -->
<form asp-action="Suppliers" method="post">
    <input name="SupplierName" placeholder="Supplier Name" class="form-control" />
    <input name="ContactInfo" placeholder="Contact Info" class="form-control" />
    <button type="submit">Add</button>
</form>

<!-- Suppliers Table -->
@if (Model != null && Model.Any())
{
    <table class="table table-bordered table-striped">
        <thead class="table-dark">
            <tr>
                <th>#</th>
                <th>Supplier Name</th>
                <th>Contact Info</th>
                <th>Created At</th>
                <th style="width:150px;">Actions</th>
            </tr>
        </thead>
        <tbody>
            @{
                int count = 1;
                foreach (var s in Model)
                {
                    <tr>
                        <td>@count</td>
                        <td>@s.SupplierName</td>
                        <td>@s.ContactInfo</td>
                        <td>@s.CreatedAt.ToString("yyyy-MM-dd")</td>
                        <td>
                            <a class="btn btn-sm btn-primary" asp-action="EditSuppliers" asp-route-id="@s.SupplierID">Edit</a>
                            <a class="btn btn-sm btn-danger" asp-action="DeleteSupplier" asp-route-id="@s.SupplierID"
                               onclick="return confirm('Are you sure you want to delete this supplier?');">Delete</a>
                        </td>
                    </tr>
                    count++;
                }
            }
        </tbody>
    </table>
}
else
{
    <div class="alert alert-info">
        <p>No suppliers found. Add your first supplier using the form above.</p>
    </div>
}